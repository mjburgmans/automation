name: Docker Image CI

on: [push]

jobs:

  build:

    runs-on: ubuntu-latest
    container:
      image: markburgmans/react-app:development
      env:
        DOCKERHUB_USER: ${{ secrets.dockerhub_user }} 
        DOCKERHUB_PASS: ${{ secrets.dockerhub_pass }}
        DOCKERHUB_EMAIL: ${{ secrets.dockerhub_email }}
    steps:
    - uses: actions/checkout@v2
    - name: install NodeJS
      run: curl -sL https://deb.nodesource.com/setup_12.x && sudo -E bash - && sudo apt-get install -y nodejs 
    - name: create react app 
      run: npx create-react-app react-app
    - name: Build the Docker image
      run: docker build . --file Dockerfile --tag reactapp2:production
    
